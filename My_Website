# My Website Project

这个文件是我用 Django 开发的个人网站中的记录。

## Day 0

Day 0 主要进行前期的准备以及路线规划。

### 技术栈规划

- 语言：Python 3
- 后端框架：Django
- 数据库；SQLite -> PostgreSQL
- 前端：HTML5 + Bootstrap 5 + Django Template (模板语言)

### 关于 Django 的基础架构理解

1. User 点击“下载” 
2. URL 路由识别请求并使用对应的处理函数
3. 视图去数据库查找并读取文件
4. 模型定义数据
5. 模板 (HMI) ，后端把数填进 HTML 发回给用户

### 环境准备

#### 创建虚拟环境

``` Bash
# 创建虚拟环境 (名字是 venv)
python -m venv venv

# 激活虚拟环境
# Windows
.\venv\Scripts\activate
# Mac/Linux
source venv/bin/activate
```

#### 安装 Django

``` Bash
pip install django
```

#### 构思数据库

我们需要什么字段？
> Blog
> - 标题 (Title) - 字符串
> - 正文 (Content) - 长文本
> - 发布日期 (Date) - 时间
> - 分类 (Category) - 字符串

> Project
> - 项目名称
> - 项目描述
> - 文件附件
> - GitHub 链接


## Day 1

### 创建项目

在项目根目录下输入以下命令：
``` Bash
django-admin startproject my_portfolio .
```

最后的那个点 (`.`) 表示“在当前目录下创建项目”。

#### 点火测试

启动服务器：
``` Bash
python manage.py runserver
```

在 Terminal 中应该能看到 `Starting development server at http://127.0.0.1:8000/`, 打开这个连接后应该能看到一个小火箭发射的页面。

按 `Ctrl + C` 停止服务器

### 创建应用

Django 的设计是：一个 Project 由多个 App 组成

#### 创建一个核心 App

在 Terminal 输入：
``` Bash
python manage.py startapp main
```

这样，我们就建立了一个名为 main 的 App

#### 注册 App

让工厂 (settings.py) 知道 App 的存在

> - 打开 `my_portfolio/settings.py` 
> - 找到 `INSTALLED_APPS` 列表
> - 在列表最后添加 `'main', ` 。

``` Python
# my_portfolio/settings.py

INSTALLED_APPS = [
    'django.contrib.admin', 
    'django.contrib.auth', 
    # ... 其他默认 APP ...
    'django.contrib.staticfiles', 
    'main', # 一定要加逗号
]
```

### 编写视图

这个过程中，我们会走通 MVT 中的 VT (View -> Template) 。

#### 写视图 (Views - 控制器)

打开 `main/views.py`, 修改如下：
``` Python
from django.shortcuts import render
from django.http import HttpResponse

# request 参数是必须的，代表用户发来的请求
def home(request):
    return HttpResponse("<h1>你好，这是我的自动化个人主页！</h1>")
```

#### 配置路由 (URLs - 导航仪)

告诉 Django，当用户访问首页时，去调用 `home` 这个函数。

打开 `my_portfolio/urls.py` (主文件夹下), 修改如下：
``` Python
from django.contrib import admin
from django.urls import path, include

from main import views

urlpatterns = [
    path('admin/', admin.site.urls), 
    path('', views.home, name='home'), 
]
```
这时，你应该可以在 `http://127.0.0.1:8000/` 上看到白底黑字的“你好，这是我的自动化个人主页！”

### 引入 HTML 模板

我们需要独立的 HTML 文件来替代 `HttpResponse` 代替 HTML 字符串。

#### 创建文件夹

在 `main` 文件夹下，创建一个叫 `templates` 的文件夹。然后在 `templates` 里面，**再** 创建一个叫 `main` 的文件夹，结构会是 `main/templates/main/`。

> 为什么要多套一层 main?
> 
> 这是 Django 的命名空间规范，防止不同 App 的模板重名。

#### 创建 HTML 文件

在 `main/templates/main/` 下新建 `homt.html`, 输入：

``` HTML
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>我的主页</title>
    <!-- 引入 Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    
    <!-- 导航栏 -->
    <nav class="navbar navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">自动化工程师的站点</a>
        </div>
    </nav>

    <!-- 主体内容 -->
    <div class="container mt-5">
        <div class="card">
            <div class="card-body">
                <h1 class="card-title">欢迎！</h1>
                <p class="card-text">这是我用 Django 搭建的第一个全栈页面。</p>
                <a href="#" class="btn btn-primary">查看项目</a>
            </div>
        </div>
    </div>

</body>
</html>
```

#### 修改视图 (View) 并使用模板

``` Python
from django.shortcuts import render

def home(request):
    # 这里的路径是从 templates 文件夹内部开始算的
    return render(request, 'main/home.html')
```






